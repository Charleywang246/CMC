<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <button type="button" onclick="gl()">get Location</button>
        <p id="demo"></p>
        <p id="output"></p>
        <input type="text" name="targetX" id="tx">
        <input type="text" name="targetY" id="ty">
        <button type="button" onclick="setTarget()">update</button>
        <button type="button" onclick="print()">print</button>

        <p>=====</p>

        <button type="button" id="gb" onclick="gb()">request bluetooth</button>
        <br><input type="text" name="bn" id="bn"><button type="button" onclick="sbn()">Set Name</button>
        <p>current bluetooth name: <span id="cbn"></span></p>

        <script>
            let targetX = 120.6362484
            let targetY = 24.1068502
            // const targetX = 120.6370795
            // const targetY = 24.1046469

            const x = document.getElementById("demo")
            const y = document.getElementById("output")

            function gl() {
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            x.innerHTML = 
                            "Longitude: " + position.coords.longitude
                            + "<br>Latitude: " + position.coords.latitude 
                            + "<br>Accuracy: " + position.coords.accuracy
                            if(
                                Math.abs(position.coords.longitude - targetX) < 0.0005
                                && Math.abs(position.coords.latitude - targetY) < 0.0005
                            ) y.innerHTML = "in class"
                            else y.innerHTML = "not in class"
                        }
                    )
                }
            }

            function setTarget() {
                k1 = document.getElementById('tx').value
                k2 = document.getElementById('ty').value
                if(isFinite(k1) || isFinite(k2)) {
                    targetX = k1 != "" ? k1 : targetX
                    targetY = k2 != "" ? k2 : targetY
                }
            }

            function print() {
                console.log("targetX: " + targetX)
                console.log("targetY: " + targetY)
            }

            let blueToothName = "LAPTOP-7D3JABTQ"

            function gb() {
                navigator.bluetooth.requestDevice({
                    acceptAllDevices: true
                })
                .then(device => {
                    console.log(device.name)
                })
                .catch(error => {console.log(error)})
            }

            function sbn() {
                if(document.getElementById("bn").value != "") {
                    blueToothName = document.getElementById("bn").value
                }
                document.getElementById("cbn").innerHTML = blueToothName
            }
                
        </script>
    </body>
</html>
