<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <p id="demo"></p>
        <p id="output"></p>
        <input type="text" name="targetX" id="tx">
        <input type="text" name="targetY" id="ty">
        <button type="button" onclick="setTarget()">update</button>
        <button type="button" onclick="print()">print</button>
        <script>
            let targetX = 120.6362484
            let targetY = 24.1068502
            // const targetX = 120.6370795
            // const targetY = 24.1046469

            const x = document.getElementById("demo")
            const y = document.getElementById("output")

            setInterval(() => {
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {x.innerHTML = 
                            "Longitude: " + position.coords.longitude
                            + "<br>Latitude: " + position.coords.latitude 
                            + "<br>Accuracy: " + position.coords.accuracy
                            + "<br>Altitude: " + position.coords.altitude
                            + "<br>Altitude Accuracy: " + position.coords.altitudeAccuracy
                            + "<br>Heading: " + position.coords.heading
                            + "<br>speed" + position.coords.speed
                        }
                    )
                }
            }, 200)

            setInterval(() => {
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            if(
                                Math.abs(position.coords.longitude - targetX) < 0.0005
                                && Math.abs(position.coords.latitude - targetY) < 0.0005
                            ) y.innerHTML = "in class"
                            else y.innerHTML = "not in class"
                        }
                    )
                }
            }, 200)

            function setTarget() {
                k1 = document.getElementById('tx').value
                k2 = document.getElementById('ty').value
                if(isFinite(k1) || isFinite(k2)) {
                    targetX = k1 != "" ? k1 : targetX
                    targetY = k2 != "" ? k2 : targetY
                }
            }
            function print() {
                console.log("targetX: " + targetX)
                console.log("targetY: " + targetY)
            }
        </script>
    </body>
</html>